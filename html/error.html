<!DOCTYPE html>
<html lang="en" ng-app="registrationApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Registration Form</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #74ebd5, #acb6e5);
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.2);
            max-width: 800px;
            width: 100%;
        }
        .form-control.ng-touched.ng-invalid {
            border-color: red;
        }
        .valid-feedback, .invalid-feedback {
            display: block;
        }
        .highlight {
            font-weight: bold;
            color: #6a11cb;
        }
    </style>
</head>
<body ng-controller="RegistrationController">
    <div class="container">
        <h2>Registration Form</h2>
        <form name="regForm" ng-submit="submitForm()" novalidate>

            <div class="mb-3">
                <label class="form-label">Enrollment Number:</label>
                <input type="text" class="form-control" name="enrollment" ng-model="user.enrollment" ng-pattern="/^\d+$/" required>
                <div class="invalid-feedback" ng-show="regForm.enrollment.$touched && regForm.enrollment.$invalid">
                    Only numbers are allowed.
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Name:</label>
                <input type="text" class="form-control" name="name" ng-model="user.name" ng-pattern="/^[A-Za-z ]+$/" required>
                <div class="invalid-feedback" ng-show="regForm.name.$touched && regForm.name.$invalid">
                    Only letters are allowed.
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Gender:</label>
                <div>
                    <input type="radio" name="gender" value="Male" ng-model="user.gender" required> Male
                    <input type="radio" name="gender" value="Female" ng-model="user.gender"> Female
                </div>
                <div class="invalid-feedback" ng-show="regForm.gender.$touched && regForm.gender.$invalid">
                    Please select gender.
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Address:</label>
                <textarea class="form-control" name="address" ng-model="user.address" required></textarea>
                <div class="invalid-feedback" ng-show="regForm.address.$touched && regForm.address.$invalid">
                    Address is required.
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Date of Birth:</label>
                <input type="date" class="form-control" name="dob" ng-model="user.dob" required>
                <div class="invalid-feedback" ng-show="regForm.dob.$touched && regForm.dob.$invalid">
                    Please select a valid date.
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">College:</label>
                <select class="form-select" name="college" ng-model="user.college" ng-change="updateCourses()" required>
                    <option value="">Select College</option>
                    <option value="SETI">SETI</option>
                    <option value="SALITER">SALITER</option>
                    <option value="PHARMA">PHARMA</option>
                    <option value="SCE">SCE</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Course:</label>
                <select class="form-select" name="course" ng-model="user.course" required ng-disabled="!user.college">
                    <option value="">Select Course</option>
                    <option ng-repeat="course in availableCourses" value="{{course}}">{{course}}</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Email:</label>
                <input type="email" class="form-control" name="email" ng-model="user.email" required>
                <div class="invalid-feedback" ng-show="regForm.email.$touched && regForm.email.$invalid">
                    Enter a valid email address.
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Mobile Number:</label>
                <input type="text" class="form-control" name="mobile" ng-model="user.mobile" ng-pattern="/^\d{10}$/" required>
                <div class="invalid-feedback" ng-show="regForm.mobile.$touched && regForm.mobile.$invalid">
                    Enter a valid 10-digit mobile number.
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Password:</label>
                <input type="password" class="form-control" name="password" ng-model="user.password" ng-change="validatePassword()" ng-pattern="/^(?=.*[A-Z])(?=.*\W).{8,}$/" required>
                <div class="invalid-feedback" ng-show="regForm.password.$touched && regForm.password.$invalid">
                    Must be at least 8 characters, contain an uppercase letter & a special character.
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Confirm Password:</label>
                <input type="password" class="form-control" name="confirmPassword" ng-model="user.confirmPassword" ng-change="validatePassword()" required>
                <div class="invalid-feedback" ng-show="user.password !== user.confirmPassword && user.confirmPassword">
                    Passwords do not match.
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-100" ng-disabled="regForm.$invalid || user.password !== user.confirmPassword">Register</button>
        </form>
    </div>

    <script>
        var app = angular.module('registrationApp', []);
    
        app.controller('RegistrationController', function ($scope) {
            $scope.user = {};

            $scope.collegeCourses = {
                "SETI": ["IT", "ICT", "CSE", "CE"],
                "SALITER": ["Mechanical", "Electrical", "Civil"],
                "PHARMA": ["B.Pharm", "M.Pharm"],
                "SCE": ["Computer", "Electronics", "Automation"]
            };

            $scope.updateCourses = function () {
                $scope.availableCourses = $scope.collegeCourses[$scope.user.college] || [];
                $scope.user.course = "";
            };

            $scope.validatePassword = function () {
                $scope.passwordMismatch = $scope.user.password !== $scope.user.confirmPassword;
            };

            $scope.submitForm = function () {
                if ($scope.regForm.$valid && !$scope.passwordMismatch) {
                    alert("Form submitted successfully!");
                    console.log("User Data:", $scope.user);
                }
            };
        });
    </script>
</body>
</html>